---
title: The CoilGun Project
date: 2023/10/16
description: The CoilGun project breakdown
tag: Electronics, Esp32, Electromagnetism
author: Chris
---

# Preamble

<p>One of my favorite projects that I ever made.</p>
<p>Many years ago, when I was still in middle school, I started watching ElectroBoom and one of his [video](https://www.youtube.com/watch?v=mdZo_keUoEs) sparked my curiosity.
The possibility to create a "gun" that runs purely on electricity trilled me. So I started designing one on my own, with zero experience in electronics and programming.</p>

## Working principle
<p>The coilgun is an electromagnetic gun based on [magnetic propulsion](https://en.wikipedia.org/wiki/Electromagnetic_propulsion). Using solenoids we can accelerate a metal projectile to high speed. We can use both high capacity LiPo batteries or high voltage capacitors to accelerate the bullet through the solenoids. The difference between the two is that while batteries are able to discharge more times in a certain time frame and are easier to use, capacitors are way more powerful and can store much more energy; this obviously means that to switch the capacitors on the coils we need a powerful switch, not a relay nor a mosfet. Usually a coilgun is made of stages, each one made up of a coil, a firing circuit, and a bullet sensor.</p>

## CoilGun MK.I

import Image from 'next/image'

<Image
  src="/images/Coilgun_MK1.png"
  alt="Coilgun MK.I"
  width={1125}
  height={750}
  priority
  className="next-image"
/>
<p>This is the first coilgun I've ever made, the Coilgun MK.I. Me and my friend [Alex](https://github.com/AlessandroBonomo28) used a Raspberry Pi 3 to time the firing of the relays to discharge the capacitors into the BAD wound coils. We've been using a small metal pin as projectile, weighting ~2g. This prototype didn't work at all, but surely was a good test bench to learn the basics of electronics and programming.</p>

### Features
- Raspberry Pi 3 as the MCU
- 3 Stages, each one with 4x 25V@4700uF capacitors in parallel
- Relays with manual firing timing
- SMPS to charge up the capacitor bank
- Efficency unkown

## CoilGun MK.II

<Image
  src="/images/Coilgun_MK2.png"
  alt="Coilgun MK.II"
  width={1125}
  height={750}
  priority
  className="next-image"
/>
<p>Later on with another friend, [Peppe](https://github.com/A-Common-Guy), we started another coilgun project. We started studying the topics we needed to create a functioning coilgun, starting from electromagnetism to power electronics and C++ programming. Then I bought a 3D printer that made the prototyping much more easier than before. A little bit of thinkering and we came up with the Coilgun MK.II. </p>

<Image
  src="/images/Coilgun_MK2_2.png"
  alt="Coilgun MK.II"
  width={1125}
  height={750}
  priority
  className="next-image"
/>
<p>This iteration was the first one that actually worked and didn't just made us waste money.</p>

#### Overall
<p>We used an Arduino Nano as the brain, controlling everything from the firing routine to the sensing of the bullet. The firing tecnique was changed, from a manual timed firing routine to an automated one, using IR led and IR receiver positioned at the end of every stage.</p>

<p>The MK.II had 4 stages and each one of them had 2 capacitors in parallel, specifically 400V@1500uF [ItelCond capacitors](https://www.itelcond.it/prodotti/acc-acs-85-5000hrs/), coming to a total of 400V@3000uF. We also added for each stage's coil a flyback diode in anti-parallel to preserve and protect the semiconductors used to switch the capacitors. To charge up these capacitors I built a very simple boost converter that, while being highly inefficient, helped us with the charging of a total of 8 capacitors. At the end of each stage there were an IR led and an IR receiver used to sense the passing of the bullet, this way we could turn off the current stage and trigger the next one.</p>

<p>To switch the capacitors on the coils we started using N-Channel Mosfets; unfortunatly they've all blown up because of the high power generated by the capacitors. The solution was found in the [SCR](https://en.wikipedia.org/wiki/Thyristor). We designed the circuit to drive the SCRs and ordered the corrisponding PCBs from JLCPCB. Each PCB had an octocoupler to isolate the low voltage arduino side from the high voltage capacitors side.</p>

<p>The bullet used was a headless 4.5 mm steel nail, weighting ~5g and long ~4cm.</p>

<Image
  src="/images/Coilgun_MK2_Lattina.gif"
  alt="Coilgun MK.II penetration"
  width={640}
  height={352}
  priority
  className="next-image"
/>

<p>Here you can see the coilgun penetrating a soda can.</p>

### Features
- Arduino Nano as the MCU
- 4 Stages, each one with 2x 400V@1500uF capacitors in parallel
- SCR with IR sensors as the automated firing tecnique
- Boost converter to charge up the capacitor bank
- Efficency unkown

### CoilGun MK.III prototype
<p>After few years from the MK.II I decided to start a new coilgun. As you can see the model itself doesn't differ much from the MK.II but a few major changes were made:</p>

- Instead of using an Arduino Nano as the MCU I switched to the more powerful Esp32
- The IR led and receiver were replaced with an easier to use [CNY70](https://www2.mouser.com/ProductDetail/Vishay-Semiconductors/CNY70?qs=%2Fjqivxn91cdreAm7vR28%252BA%3D%3D) IR sensor
- The old boost converter was trashed and replaced with a much more efficient and powerful [ZVS Driver]()

<p>All of these changes where channeled in the final MK.III.</p>

<Image
  src="/images/Coilgun_MK3_Prototype.png"
  alt="Coilgun MK.III prototype"
  width={1125}
  height={750}
  priority
  className="next-image"
/>

## Coilgun MK.III